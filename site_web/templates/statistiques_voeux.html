<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <meta name="description" content=""/>
    <meta name="author" content=""/>
    <title>Concours Mines-Telecom</title>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename="assets/favicon.ico") }}"/>
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v5.15.3/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Raleway:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i"
          rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700,700i" rel="stylesheet"/>
    <!-- Core theme CSS (includes Bootstrap)-->
    <link rel="stylesheet" href="{{ url_for('static', filename="css/styles.css") }}"/>
    {% from "_formhelpers.html" import render_field %}
</head>
<body>
<h1 class="site-heading text-center text-white d-none d-lg-block">
    <span class="site-heading-upper text-primary mb-3">Consultation des données</span>
    <span class="site-heading-lower">Concours Mines-Telecom</span>
</h1>
<!-- Navigation-->

{% include 'header.html' %}

<section class="page-section container bg-faded p-5 rounded mr-auto">
    <h1>Rechercher une école particulière</h1>
    {{ render_field(ecoles.nomEcole, class="form-control") }}
    <div class="row" id="Demande par filière">
        <h3>Demande des candidats par école</h3>
        <table class="table table-sm">
            <thread>
                <th scope="col">Ecole</th>
                <th scope="col">ATS</th>
                <th scope="col">MP</th>
                <th scope="col">PC</th>
                <th scope="col">PSI</th>
                <th scope="col">PT</th>
                <th scope="col">TSI</th>
                <th scope="col">Nombre total de demande</th>
                <th scope="col">Pourcentage total de demande</th>
            </thread>
            <tbody id="table_ecole">
            {% for line in counts %}
                <tr id="{{ line[0] }}">
                    {% for element in line %}
                        <td>{{ element }}</td>
                    {% endfor %}
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="text-center">
        <input class="btn btn-outline-secondary" type="button"
               value="Télécharger rapport candidat"
               onclick="download('Demande par filière')">
    </div>
</section>

{% include 'footer.html' %}

<!-- Bootstrap core JS-->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
<!-- Core theme JS-->
<script src="{{ url_for('static',filename='js/bootstrap.js') }}"></script>
<script src="{{ url_for('static',filename='js/scripts.js') }}"></script>
<script type="text/javascript">
    document.getElementsByTagName('input')[0].oninput = function () {
        {#recherche du nom de l'école#}
        const nomEcole = this.value.toLowerCase();

        {#affichage de l'école que l'on veut#}

        let elements = document.getElementById("table_ecole");
        for (let i = 0; i < elements.children.length; i++) {
            if (nomEcole !== "") {
                if (elements.children[i].id.toLowerCase().startsWith(nomEcole)) {
                    elements.children[i].hidden = false;
                } else {
                    elements.children[i].hidden = true;
                }
            } else {
                elements.children[i].hidden = false;
            }
        }
        document.getElementById("table_ecole").innerHTML = elements.innerHTML;
    }
</script>
</body>
</html>
